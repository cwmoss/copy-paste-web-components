let jtmpl=document.createElement("template");jtmpl.innerHTML="\n<style>\n*,*:before, *:after{\n    box-sizing:border-box;\n}\n:host{\n    --col-bg: white;\n    --j-font-size: 1rem;\n    --space: 16px;\n\tfont-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', \n        Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    font-size: var(--j-font-size);\n    /* position:fixed;z-index:122;*/\n    max-height:90vh;max-width:100vw;\n    overflow-y:scroll;top:32px;left:16px;\n    background-color:var(--col-bg);\n    color:black;line-height:1.5;\n    /* border-radius:3px; */\n\n    --col-key: rgb( 0, 136, 204 );\n    --col-val: rgb( 50, 150, 80 );\n}\n\nul, li{\n    list-style-type:none;\n    margin:0;\n    padding:0;\n    }\ndetails>ul{\n    padding-left: var(--space);\n    border-left: 1px solid transparent;\n}\ndetails>ul:hover{\n    border-left:1px solid silver;\n}\nsummary{\n    cursor: pointer;\n}\nsummary  {\n position: relative;\n /*padding-left: 2.2rem;*/\n padding-left: var(--space);\n display: block;\n  list-style: none;\n}\n\n/* sigh, Safari again */\n\nsummary::-webkit-details-marker {\n  display: none;\n}\n\nsummary:before {\n  content: '';\n  border-width: 6px;\n  border-style: solid;\n  border-color: transparent transparent transparent #000;\n  position: absolute;\n  top: 4px;\n  left: -2px;\n  transform: rotate(0);\n  transform-origin: 2px 50%;\n  transition: .25s transform ease;\n}\n/* THE MAGIC 🧙‍♀️ */\ndetails[open] > summary:before {\n  transform: rotate(90deg);\n}\n\ndetails summary::marker {\n  display:none;\n}\n\ndetails{\n    color: var(--col-val)\n}\ndetails strong{\n    color: var(--col-key)\n}\n</style>\n<main>\n</main>\n";class JsonExplorer extends HTMLElement{_data={};reflinks=!1;static observedAttributes=["data"];constructor(){super().attachShadow({mode:"open"}).appendChild(jtmpl.content.cloneNode(!0)),this.main=this.shadowRoot.querySelector("main"),this.textContent.trim()&&(this.json=this.textContent)}attributeChangedCallback(e,n,t){"data"==e&&(this.json=t)}set json(e){this.data=JSON.parse(e)}set data(e){this._data=e,this.render()}get data(){return this._data}path(e){return e}html_encode(e){const n=document.createElement("textarea");return n.innerText=e,n.innerHTML.split("<br>").join("\n")}render_value(e,n,t){this.reflinks&&"_ref"==n?t=`<a href="/__ui/id/${encodeURIComponent(t)}">${t}</a>`:(null===t&&(t="null"),t=this.html_encode(t)),e.insertAdjacentHTML("beforeend",`<li><strong class="k">${n}:</strong> ${t}</li>`)}render_array(e,n,t){let r=document.createElement("li"),a=document.createElement("details");a.classList.add("a"),a.insertAdjacentHTML("beforeend",`<summary><strong>${n}:</strong> [${t.length} items]</summary>`);let s=document.createElement("ul");t.forEach(((e,n)=>Array.isArray(e)?this.render_array(s,n,e):null==e?this.render_value(s,n,e):"object"==typeof e?this.render_object(s,n,e):void this.render_value(s,n,e))),a.appendChild(s),r.appendChild(a),e.appendChild(r)}render_object(e,n,t,r=!1,a=!1){let s=document.createElement("ul");if(Object.keys(t).forEach((e=>{let n=t[e];return null==n?this.render_value(s,e,n):Array.isArray(n)?this.render_array(s,e,n):"object"==typeof n?this.render_object(s,e,n):void this.render_value(s,e,n)})),a)e.appendChild(s);else{let a=document.createElement("li"),o=document.createElement("details");o.classList.add("o"),r&&o.setAttribute("open",""),o.insertAdjacentHTML("beforeend",`<summary><strong>${n}:</strong> {${Object.keys(t).length} keys}</summary>`),o.appendChild(s),a.appendChild(o),e.appendChild(a)}}render(){if(this.main.innerHTML="",Array.isArray(this._data))return this.render_object(this.main,"root",{root:this._data},!0,!0);this.render_object(this.main,"root",this._data,!0,!0)}}customElements.define("json-explorer",JsonExplorer);
